

<!DOCTYPE html>
<html lang="en">
<head>

  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <title>
      components/users/Register.js - ODU ALMP Docs
  </title>

  <link href="https://www.braintreepayments.com/images/favicon-ccda0b14.png" rel="icon" type="image/png">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.7.0/highlight.min.js"></script>
  <script>hljs.initHighlightingOnLoad();</script>

  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.0/jquery.min.js"></script>

  <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
  <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
  

  
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/docsearch.js/2/docsearch.min.css" />
  <script type="text/javascript" src="https://cdn.jsdelivr.net/docsearch.js/2/docsearch.min.js"></script>
  

  <!-- start Mixpanel -->
  <script type="text/javascript">(function(e,a){if(!a.__SV){var b=window;try{var c,l,i,j=b.location,g=j.hash;c=function(a,b){return(l=a.match(RegExp(b+"=([^&]*)")))?l[1]:null};g&&c(g,"state")&&(i=JSON.parse(decodeURIComponent(c(g,"state"))),"mpeditor"===i.action&&(b.sessionStorage.setItem("_mpcehash",g),history.replaceState(i.desiredHash||"",e.title,j.pathname+j.search)))}catch(m){}var k,h;window.mixpanel=a;a._i=[];a.init=function(b,c,f){function e(b,a){var c=a.split(".");2==c.length&&(b=b[c[0]],a=c[1]);b[a]=function(){b.push([a].concat(Array.prototype.slice.call(arguments,
  0)))}}var d=a;"undefined"!==typeof f?d=a[f]=[]:f="mixpanel";d.people=d.people||[];d.toString=function(b){var a="mixpanel";"mixpanel"!==f&&(a+="."+f);b||(a+=" (stub)");return a};d.people.toString=function(){return d.toString(1)+".people (stub)"};k="disable time_event track track_pageview track_links track_forms register register_once alias unregister identify name_tag set_config reset people.set people.set_once people.increment people.append people.union people.track_charge people.clear_charges people.delete_user".split(" ");
  for(h=0;h<k.length;h++)e(d,k[h]);a._i.push([b,c,f])};a.__SV=1.2;b=e.createElement("script");b.type="text/javascript";b.async=!0;b.src="undefined"!==typeof MIXPANEL_CUSTOM_LIB_URL?MIXPANEL_CUSTOM_LIB_URL:"file:"===e.location.protocol&&"//cdn.mxpnl.com/libs/mixpanel-2-latest.min.js".match(/^\/\//)?"https://cdn.mxpnl.com/libs/mixpanel-2-latest.min.js":"//cdn.mxpnl.com/libs/mixpanel-2-latest.min.js";c=e.getElementsByTagName("script")[0];c.parentNode.insertBefore(b,c)}})(document,window.mixpanel||[]);
  mixpanel.init("1919205b2da72e4da3b9b6639b444d59");</script>
  <!-- end Mixpanel -->
</head>

<body>
  <svg style="display: none;">
    <defs>
      <symbol id="linkIcon" fill="#706d77" height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg">
          <path d="M0 0h24v24H0z" fill="none"/>
          <path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5z"/>
      </symbol>
    </defs>
  </svg>

  <input type="checkbox" id="nav-trigger" class="nav-trigger" />
  <label for="nav-trigger" class="navicon-button x">
    <div class="navicon"></div>
  </label>

  <label for="nav-trigger" class="overlay"></label>

  <div class="top-nav-wrapper">
    <ul>
      <li >
        <a href="index.html">
          
            <svg fill="#6D6D6D" height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg">
              <path d="M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"/>
              <path d="M0 0h24v24H0z" fill="none"/>
            </svg>
          
          
        </a>
      </li>

      
      <li>
        <div class="search-wrapper">
          <svg fill="#6D6D6D" height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg">
            <path d="M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"/>
            <path d="M0 0h24v24H0z" fill="none"/>

          </svg>
          <input type="text" placeholder="Search" class="search-input">
        </div>
      </li>
      

    </ul>
  </div>

  <nav>
    <h3 class="reference-title">
      Asynchronous Learning Management System @ ODU-EMSE
    </h3>

    

    <h3>Classes</h3><ul><li id="App-nav"><a href="App.html">App</a></li><li id="Course-nav"><a href="Course.html">Course</a></li><li id="Dashboard-nav"><a href="Dashboard.html">Dashboard</a><ul class='methods'><li data-type="method" id="Dashboard-Panel-nav"><a href="Dashboard.html#.Panel">Panel</a></li><li data-type="method" id="Dashboard-RenderLineChart-nav"><a href="Dashboard.html#.RenderLineChart">RenderLineChart</a></li></ul></li><li id="Login-nav"><a href="Login.html">Login</a><ul class='methods'><li data-type="method" id="Login-change-nav"><a href="Login.html#.change">change</a></li><li data-type="method" id="Login-onLogin-nav"><a href="Login.html#.onLogin">onLogin</a></li></ul></li><li id="PlanOfStudy-nav"><a href="PlanOfStudy.html">PlanOfStudy</a><ul class='methods'><li data-type="method" id="PlanOfStudy-getPlan-nav"><a href="PlanOfStudy.html#.getPlan">getPlan</a></li><li data-type="method" id="PlanOfStudy-loader-nav"><a href="PlanOfStudy.html#.loader">loader</a></li></ul></li><li id="Profile-nav"><a href="Profile.html">Profile</a><ul class='methods'><li data-type="method" id="Profile-deleteUser-nav"><a href="Profile.html#~deleteUser">deleteUser</a></li><li data-type="method" id="Profile-getUser-nav"><a href="Profile.html#~getUser">getUser</a></li><li data-type="method" id="Profile-handleInstructorProfileChange-nav"><a href="Profile.html#~handleInstructorProfileChange">handleInstructorProfileChange</a></li><li data-type="method" id="Profile-toggleInstructor-nav"><a href="Profile.html#~toggleInstructor">toggleInstructor</a></li><li data-type="method" id="Profile-updateUser-nav"><a href="Profile.html#~updateUser">updateUser</a></li></ul></li><li id="Protector-nav"><a href="Protector.html">Protector</a></li><li id="Register-nav"><a href="Register.html">Register</a><ul class='methods'><li data-type="method" id="Register-change-nav"><a href="Register.html#.change">change</a></li><li data-type="method" id="Register-nextStep-nav"><a href="Register.html#.nextStep">nextStep</a></li><li data-type="method" id="Register-previousStep-nav"><a href="Register.html#.previousStep">previousStep</a></li></ul></li><li id="UserInfo-nav"><a href="UserInfo.html">UserInfo</a><ul class='methods'><li data-type="method" id="UserInfo-next-nav"><a href="UserInfo.html#~next">next</a></li></ul></li><li id="UserVerify-nav"><a href="UserVerify.html">UserVerify</a></li></ul><h3>Modules</h3><ul><li id="GetPlanByStudentID-nav"><a href="module-GetPlanByStudentID.html">GetPlanByStudentID</a><ul class='methods'><li data-type="method" id="GetPlanByStudentID-getPlan-nav"><a href="module-GetPlanByStudentID.html#~getPlan">getPlan</a></li></ul></li><li id="InstructorProfileContext-nav"><a href="module-InstructorProfileContext.html">InstructorProfileContext</a><ul class='methods'><li data-type="method" id="InstructorProfileContext-contextReducer-nav"><a href="module-InstructorProfileContext.html#~contextReducer">contextReducer</a></li><li data-type="method" id="InstructorProfileContext-InstructorProvider-nav"><a href="module-InstructorProfileContext.html#~InstructorProvider">InstructorProvider</a></li><li data-type="method" id="InstructorProfileContext-useInstructorContext-nav"><a href="module-InstructorProfileContext.html#~useInstructorContext">useInstructorContext</a></li></ul></li></ul><h3 id="global-nav">Global</h3><ul><li><a href="global.html#abandonModule">abandonModule</a></li><li><a href="global.html#calculateRating">calculateRating</a></li><li><a href="global.html#checkTaken">checkTaken</a></li><li><a href="global.html#convert">convert</a></li><li><a href="global.html#decoder">decoder</a></li><li><a href="global.html#getModule">getModule</a></li><li><a href="global.html#getRandomNum">getRandomNum</a></li><li><a href="global.html#getToken">getToken</a></li><li><a href="global.html#isAuthenticated">isAuthenticated</a></li><li><a href="global.html#loader">loader</a></li><li><a href="global.html#profileCheck">profileCheck</a></li><li><a href="global.html#progress">progress</a></li><li><a href="global.html#rating">rating</a></li><li><a href="global.html#refreshPage">refreshPage</a></li><li><a href="global.html#removeToken">removeToken</a></li><li><a href="global.html#round_to_precision">round_to_precision</a></li></ul>
  </nav>

  <div id="main">
    
      <h1 class="page-title">
        components/users/Register.js
      </h1>
    

    
      

<section>
  <article>
    <pre class="prettyprint source linenums"><code>/**
 * @name Register
 * @category Authentication
 * @class
 * @summary Register page that holds all the steps involved in the registration flow
 * @param {React.ComponentProps} props The Component props passed down from the parent ({@link App}).
 * @requires React.useState
 * @requires react-toastify
 * @requires getToken
 */
import React, { useState } from 'react'
import { ToastContainer, toast } from 'react-toastify'
import Confirm from './Register/Confirm'
import PersonalInfo from './Register/PersonalInfo'
import Success from './Register/Success'
import UserInfo from './Register/UserInfo'
import { checkTaken } from '../../utils/checkTaken'
import { getToken } from '../helpers'

const Register = (props) => {
	/**
	 * @member
	 * @name RegisterComponentState
	 * @memberof Register
	 * @type {React.ComponentState}
	 * @property {Number} step The current step in the registration flow
	 * @property {String} firstName
	 * @property {String} lastName
	 * @property {String} middleName
	 * @property {String} email The email address of the user.
	 * @property {String} password
	 * @property {String} passwordConf
	 * @property {String | null} group
	 * @property {String} [title]
	 * @property {String} [officeHours]
	 * @property {String} [officeLocation]
	 * @property {String} [phone]
	 * @property {String} [contactPolicy]
	 * @property {String} [background]
	 * @property {String} [researchInterests]
	 * @property {String} [selectedPapersAndPublications]
	 * @property {String} [website]
	 * @property {String} [philosophy]
	 * @property {Boolean} error
	 */
	const [step, setStep] = useState(1)
	const [firstName, setFirstName] = useState('')
	const [lastName, setLastName] = useState('')
	const [middleName, setMiddleName] = useState('')
	const [email, setEmail] = useState('')
	const [password, setPassword] = useState('')
	const [passwordConf, setPasswordConf] = useState('')
	const [group, setGroup] = useState(null)
	const [title, setTitle] = useState('')
	const [officeLocation, setOfficeLocation] = useState('')
	const [officeHours, setOfficeHours] = useState('')
	const [phone, setPhone] = useState('')
	const [contactPolicy, setContactPolicy] = useState('')
	const [background, setBackground] = useState('')
	const [researchInterest, setResearchInterest] = useState('')
	const [selectedPapersAndPublications, setSelectedPapersAndPublications] =
		useState('')
	const [website, setWebsite] = useState('')
	const [philosophy, setPhilosophy] = useState('')
	const [error, setError] = useState(false)

	/**
	 * @function
	 * @summary A simple increment function to move between Registration steps.
	 * @description The next step function is called when the next button is clicked on the registration form. It performs multiple validation checks. It renders an errors upon incomplete fields and allows progress if no errors are present. If no validation errors are present, the step is incremented and the field values are saved in the component state.
	 * @memberof Register
	 * @see {@link checkTaken}
	 */
	const nextStep = () => {
		if (
			firstName.length === 0 ||
			lastName.length === 0 ||
			email.length === 0 ||
			group == null
		) {
			setStep(1)
			toast.error(
				'Please make sure that the required fields are filled out',
				{
					position: toast.POSITION.TOP_RIGHT,
				}
			)
			setError(true)
		} else if (password.length &lt;= 6 || passwordConf.length &lt;= 6) {
			setStep(1)
			toast.error(
				'Please make sure that your password is at least 6 characters long',
				{
					position: toast.POSITION.TOP_RIGHT,
				}
			)
			setError(true)
		} else if (password !== passwordConf) {
			setStep(1)
			toast.error('Please make sure that your password match', {
				position: toast.POSITION.TOP_RIGHT,
			})
			setError(true)
		} else {
			checkTaken(email)
				.then((res) => {
					if (res.message.length > 0) {
						setError(true)
						return toast.error(res.message, {
							position: toast.POSITION.TOP_RIGHT,
						})
					} else {
						setError(false)
						setEmail(res.email)
						setStep(step + 1)
					}
				})
				.catch((err) => {
					setError(true)
					console.error(err)
					return toast.error(err, {
						position: toast.POSITION.TOP_RIGHT,
					})
				})
		}
	}

	/**
	 * @name previousStep
	 * @function
	 * @summary A simple decrement function to move between Registration steps.
	 * @description The previous step function is called when the back button is clicked on the registration form. It does not perform any validations, it simply decrements the step. If the user selected to be a student, the backwards step is set to 2, as the student does not have to fill out the professor information fields, present in step 2. If the user selected to be a professor, the backwards step is set to 1.
	 * @memberof Register
	 */
	const previousStep = () => {
		if (group === 'student' &amp;&amp; step === 3) {
			setStep(step - 2)
		} else {
			setStep(step - 1)
		}
	}

	/**
	 * @name change
	 * @function
	 * @summary This function handles all the changes made in the registration form fields.
	 * @todo Turn the update state function into a dynamic key value pair implementation with the spread operator.
	 * @memberof Register
	 */
	const change = (input) => (e) => {
		if (error &amp;&amp; input) {
			setError(false)
		}
		if (input === 'firstName') {
			setFirstName(e.target.value)
		}
		if (input === 'lastName') {
			setLastName(e.target.value)
		}
		if (input === 'middleName') {
			setMiddleName(e.target.value)
		}
		if (input === 'email') {
			setEmail(e.target.value)
		}
		if (input === 'password') {
			setPassword(e.target.value)
		}
		if (input === 'passwordConf') {
			setPasswordConf(e.target.value)
		}
		if (input === 'group') {
			setGroup(e.target.value)
		}
		if (input === 'title') {
			setTitle(e.target.value)
		}
		if (input === 'officeLocation') {
			setOfficeLocation(e.target.value)
		}
		if (input === 'officeHours') {
			setOfficeHours(e.target.value)
		}
		if (input === 'phone') {
			setPhone(e.target.value)
		}
		if (input === 'contactPolicy') {
			setContactPolicy(e.target.value)
		}
		if (input === 'background') {
			setBackground(e.target.value)
		}
		if (input === 'researchInterest') {
			setResearchInterest(e.target.value)
		}
		if (input === 'selectedPapersAndPublications') {
			setSelectedPapersAndPublications(e.target.value)
		}
		if (input === 'personalWebsite') {
			setWebsite(e.target.value)
		}
		if (input === 'philosophy') {
			setPhilosophy(e.target.value)
		}
	}
	//combining all form values into a single object
	const values = {
		firstName,
		lastName,
		middleName,
		email,
		password,
		passwordConf,
		group,
		title,
		officeLocation,
		officeHours,
		phone,
		contactPolicy,
		background,
		researchInterest,
		selectedPapersAndPublications,
		website,
		philosophy,
	}
	if (getToken() !== `Bearer ${null}`) {
		//if there is a token -> send them home
		return props.history.push('/')
	} else {
		switch (step) {
			case 1:
				return (
					&lt;>
						&lt;ToastContainer />
						&lt;UserInfo
							nextStep={nextStep}
							change={change}
							values={values}
							error={error}
						/>
					&lt;/>
				)
			case 2:
				return (
					&lt;>
						&lt;ToastContainer />
						&lt;PersonalInfo
							nextStep={nextStep}
							previousStep={previousStep}
							change={change}
							values={values}
							error={error}
						/>
					&lt;/>
				)
			case 3:
				return (
					&lt;Confirm
						nextStep={nextStep}
						previousStep={previousStep}
						values={values}
						error={error}
					/>
				)
			case 4:
				return &lt;Success />
			default:
				return null
		}
	}
}

export default Register
</code></pre>
  </article>
</section>

    


  </div>

  <br class="clear">

  <footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.6.10</a> <br/>
    Theme by <a href="https://github.com/braintree/jsdoc-template">Braintree</a> <br/>
  </footer>

  <script src="scripts/linenumber.js"></script>
  <script src="scripts/pagelocation.js"></script>

  
  {# <script>
    $(function () {
      window.docsearch({
        apiKey: '',
        indexName: 'braintree',
        inputSelector: '.search-input',
        debug: false, // Set debug to true if you want to inspect the dropdown
        algoliaOptions: {
          hitsPerPage: 7
        }
      });
    });
  </script> #}
  

</body>
</html>
