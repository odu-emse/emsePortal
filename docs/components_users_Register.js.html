

<!DOCTYPE html>
<html lang="en">

<head>
  
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>ODU ALMP Docs components/users/Register.js</title>

  <script src="https://cdn.jsdelivr.net/gh/google/code-prettify@master/loader/run_prettify.js"></script>
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
  <script src="./build/entry.js"></script>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
  <![endif]-->
  <link href="https://fonts.googleapis.com/css?family=Roboto:100,400,700|Inconsolata,700" rel="stylesheet">
  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.6.3/css/all.css" integrity="sha384-UHRtZLI+pbxtHCWp1t77Bi1L4ZtiqrqD80Kn4Z8NTSRyMA2Fd33n5dQ8lWUE00s/" crossorigin="anonymous">
  <link type="text/css" rel="stylesheet" href="https://jmblog.github.io/color-themes-for-google-code-prettify/themes/tomorrow-night.min.css">
  <link type="text/css" rel="stylesheet" href="styles/app.min.css">
  <link type="text/css" rel="stylesheet" href="styles/iframe.css">
  <link type="text/css" rel="stylesheet" href="">
  <script async defer src="https://buttons.github.io/buttons.js"></script>

  
</head>



<body class="layout small-header">
    <div id="stickyNavbarOverlay"></div>
    

<div class="top-nav">
    <div class="inner">
        <a id="hamburger" role="button" class="navbar-burger" aria-label="menu" aria-expanded="false">
            <span aria-hidden="true"></span>
            <span aria-hidden="true"></span>
            <span aria-hidden="true"></span>
        </a>
        <div class="logo">
            
             
                <a href="index.html">
                    <h1 class="navbar-item">Asynchronous Learning Management System @ ODU-EMSE</h1>
                </a>
            
        </div>
        <div class="menu">
            
            <div class="navigation">
                <a
                    href="index.html"
                    class="link"
                >
                    Documentation
                </a>
                
                 
                    
                        <a
                            class="link user-link "
                            href="https://github.com/odu-emse/emsePortal"
                        >
                            Github - UI
                        </a>
                    
                        <a
                            class="link user-link "
                            href="https://github.com/odu-emse/emseAPI"
                        >
                            Github - API
                        </a>
                    
                
                
            </div>
        </div>
    </div>
</div>
    <div id="main">
        <div
            class="sidebar "
            id="sidebarNav"
        >
            
                <div class="search-wrapper">
                    <input id="search" type="text" placeholder="Search docs..." class="input">
                </div>
            
            <nav>
                
                    <h2><a href="index.html">Documentation</a></h2><div class="category"><h3>Components</h3><ul><li><a href="App.html">App</a></li></ul><h3><a href="global.html">Global</a></h3></div><div class="category"><h2>Authentication</h2><h3>Classes</h3><ul><li><a href="Register.html">Register</a></li></ul><h3>Components</h3><ul><li><a href="Login.html">Login</a></li><li><a href="Protector.html">Protector</a></li><li><a href="UserVerify.html">UserVerify</a></li></ul></div><div class="category"><h2>Context</h2><h3>Modules</h3><ul><li><a href="module-InstructorProfileContext.html">InstructorProfileContext</a></li></ul></div><div class="category"><h2>Hooks</h2><h3>Modules</h3><ul><li><a href="module-GetPlanByStudentID.html">GetPlanByStudentID</a></li></ul></div><div class="category"><h2>Plan Of Study</h2><h3>Components</h3><ul><li><a href="PlanOfStudy.html">PlanOfStudy</a></li><li><a href="Profile.html">Profile</a></li></ul></div><div class="category"><h2>Program</h2><h3>Components</h3><ul><li><a href="Course.html">Course</a></li><li><a href="Dashboard.html">Dashboard</a></li><li><a href="ModuleHousing.html">ModuleHousing</a></li></ul></div><div class="category"><h2>User</h2><h3>Components</h3><ul><li><a href="UserInfo.html">UserInfo</a></li></ul></div><div class="category"><h2>helper</h2><h3>Global</h3><ul><li><a href="global.html#abandonModule">abandonModule</a></li><li><a href="global.html#calculateRating">calculateRating</a></li><li><a href="global.html#checkTaken">checkTaken</a></li><li><a href="global.html#convert">convert</a></li><li><a href="global.html#decoder">decoder</a></li><li><a href="global.html#getModule">getModule</a></li><li><a href="global.html#getRandomNum">getRandomNum</a></li><li><a href="global.html#getToken">getToken</a></li><li><a href="global.html#isAuthenticated">isAuthenticated</a></li><li><a href="global.html#loader">loader</a></li><li><a href="global.html#profileCheck">profileCheck</a></li><li><a href="global.html#progress">progress</a></li><li><a href="global.html#rating">rating</a></li><li><a href="global.html#refreshPage">refreshPage</a></li><li><a href="global.html#removeToken">removeToken</a></li><li><a href="global.html#round_to_precision">round_to_precision</a></li></ul></div>
                
            </nav>
        </div>
        <div class="core" id="main-content-wrapper">
            <div class="content">
                <header class="page-title">
                    <p>Source</p>
                    <h1>components/users/Register.js</h1>
                </header>
                



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>/**
 * @name Register
 * @category Authentication
 * @class
 * @summary Register page that holds all the steps involved in the registration flow
 * @param {React.ComponentProps} props The Component props passed down from the parent ({@link App}).
 * @requires React.useState
 * @requires react-toastify
 * @requires getToken
 */
import React, { useState } from 'react'
import { ToastContainer, toast } from 'react-toastify'
import Confirm from './Register/Confirm'
import PersonalInfo from './Register/PersonalInfo'
import Success from './Register/Success'
import UserInfo from './Register/UserInfo'
import { checkTaken } from '../../utils/checkTaken'
import { getToken } from '../helpers'

const Register = (props) => {
	/**
	 * @typedef UserRegister
	 * @memberof Register
	 * @property {String} firstName
	 * @property {String} lastName
	 * @property {String} middleName
	 * @property {String} email The email address of the user.
	 * @property {String} password
	 * @property {String} passwordConf
	 * @property {String} group
	 */

	/**
	 * @typedef InstructorRegister
	 * @memberof Register
	 * @property {String} [title]
	 * @property {String} [officeHours]
	 * @property {String} [officeLocation]
	 * @property {String} [phone]
	 * @property {String} [contactPolicy]
	 * @property {String} [background]
	 * @property {String} [researchInterests]
	 * @property {String} [selectedPapersAndPublications]
	 * @property {String} [website]
	 * @property {String} [philosophy]
	 */

	/**
	 * @callback setUser
	 * @memberof Register
	 * @param {UserRegister} values
	 */
	/**
	 * @callback setInstructorProfile
	 * @memberof Register
	 * @param {InstructorRegister} values
	 */

	/**
	 * @typedef State
	 * @memberof Register
	 * @prop {UserRegister} [user]
	 * @prop {setUser} setUser
	 */

	/**
	 * @typedef State
	 * @memberof Register
	 * @prop {InstructorRegister} [instructor]
	 * @prop {setInstructorProfile} setInstructorProfile
	 */

	/**
	 * @property {Number} step The current step in the registration flow
	 * @property {String} firstName
	 * @property {String} lastName
	 * @property {String} middleName
	 * @property {String} email The email address of the user.
	 * @property {String} password
	 * @property {String} passwordConf
	 * @property {String | null} group
	 * @property {String} [title]
	 * @property {String} [officeHours]
	 * @property {String} [officeLocation]
	 * @property {String} [phone]
	 * @property {String} [contactPolicy]
	 * @property {String} [background]
	 * @property {String} [researchInterests]
	 * @property {String} [selectedPapersAndPublications]
	 * @property {String} [website]
	 * @property {String} [philosophy]
	 * @property {Boolean} error
	 */
	/**
	 * @type {State}
	 */
	const [step, setStep] = useState(1)
	const [firstName, setFirstName] = useState('')
	const [lastName, setLastName] = useState('')
	const [middleName, setMiddleName] = useState('')
	const [email, setEmail] = useState('')
	const [password, setPassword] = useState('')
	const [passwordConf, setPasswordConf] = useState('')
	const [group, setGroup] = useState(null)
	const [title, setTitle] = useState('')
	const [officeLocation, setOfficeLocation] = useState('')
	const [officeHours, setOfficeHours] = useState('')
	const [phone, setPhone] = useState('')
	const [contactPolicy, setContactPolicy] = useState('')
	const [background, setBackground] = useState('')
	const [researchInterest, setResearchInterest] = useState('')
	const [selectedPapersAndPublications, setSelectedPapersAndPublications] =
		useState('')
	const [website, setWebsite] = useState('')
	const [philosophy, setPhilosophy] = useState('')
	const [error, setError] = useState(false)

	/**
	 * @function
	 * @summary A simple increment function to move between Registration steps.
	 * @description The next step function is called when the next button is clicked on the registration form. It performs multiple validation checks. It renders an errors upon incomplete fields and allows progress if no errors are present. If no validation errors are present, the step is incremented and the field values are saved in the component state.
	 * @memberof Register
	 * @see {@link checkTaken}
	 */
	const nextStep = () => {
		if (
			firstName.length === 0 ||
			lastName.length === 0 ||
			email.length === 0 ||
			group == null
		) {
			setStep(1)
			toast.error(
				'Please make sure that the required fields are filled out',
				{
					position: toast.POSITION.TOP_RIGHT,
				}
			)
			setError(true)
		} else if (password.length &lt;= 6 || passwordConf.length &lt;= 6) {
			setStep(1)
			toast.error(
				'Please make sure that your password is at least 6 characters long',
				{
					position: toast.POSITION.TOP_RIGHT,
				}
			)
			setError(true)
		} else if (password !== passwordConf) {
			setStep(1)
			toast.error('Please make sure that your password match', {
				position: toast.POSITION.TOP_RIGHT,
			})
			setError(true)
		} else {
			checkTaken(email)
				.then((res) => {
					if (res.message.length > 0) {
						setError(true)
						return toast.error(res.message, {
							position: toast.POSITION.TOP_RIGHT,
						})
					} else {
						setError(false)
						setEmail(res.email)
						setStep(step + 1)
					}
				})
				.catch((err) => {
					setError(true)
					console.error(err)
					return toast.error(err, {
						position: toast.POSITION.TOP_RIGHT,
					})
				})
		}
	}

	/**
	 * @name previousStep
	 * @function
	 * @summary A simple decrement function to move between Registration steps.
	 * @description The previous step function is called when the back button is clicked on the registration form. It does not perform any validations, it simply decrements the step. If the user selected to be a student, the backwards step is set to 2, as the student does not have to fill out the professor information fields, present in step 2. If the user selected to be a professor, the backwards step is set to 1.
	 * @memberof Register
	 */
	const previousStep = () => {
		if (group === 'student' &amp;&amp; step === 3) {
			setStep(step - 2)
		} else {
			setStep(step - 1)
		}
	}

	/**
	 * @name change
	 * @function
	 * @summary This function handles all the changes made in the registration form fields.
	 * @todo Turn the update state function into a dynamic key value pair implementation with the spread operator.
	 * @memberof Register
	 */
	const change = (input) => (e) => {
		if (error &amp;&amp; input) {
			setError(false)
		}
		if (input === 'firstName') {
			setFirstName(e.target.value)
		}
		if (input === 'lastName') {
			setLastName(e.target.value)
		}
		if (input === 'middleName') {
			setMiddleName(e.target.value)
		}
		if (input === 'email') {
			setEmail(e.target.value)
		}
		if (input === 'password') {
			setPassword(e.target.value)
		}
		if (input === 'passwordConf') {
			setPasswordConf(e.target.value)
		}
		if (input === 'group') {
			setGroup(e.target.value)
		}
		if (input === 'title') {
			setTitle(e.target.value)
		}
		if (input === 'officeLocation') {
			setOfficeLocation(e.target.value)
		}
		if (input === 'officeHours') {
			setOfficeHours(e.target.value)
		}
		if (input === 'phone') {
			setPhone(e.target.value)
		}
		if (input === 'contactPolicy') {
			setContactPolicy(e.target.value)
		}
		if (input === 'background') {
			setBackground(e.target.value)
		}
		if (input === 'researchInterest') {
			setResearchInterest(e.target.value)
		}
		if (input === 'selectedPapersAndPublications') {
			setSelectedPapersAndPublications(e.target.value)
		}
		if (input === 'personalWebsite') {
			setWebsite(e.target.value)
		}
		if (input === 'philosophy') {
			setPhilosophy(e.target.value)
		}
	}
	//combining all form values into a single object
	const values = {
		firstName,
		lastName,
		middleName,
		email,
		password,
		passwordConf,
		group,
		title,
		officeLocation,
		officeHours,
		phone,
		contactPolicy,
		background,
		researchInterest,
		selectedPapersAndPublications,
		website,
		philosophy,
	}
	if (getToken() !== `Bearer ${null}`) {
		//if there is a token -> send them home
		return props.history.push('/')
	} else {
		switch (step) {
			case 1:
				return (
					&lt;>
						&lt;ToastContainer />
						&lt;UserInfo
							nextStep={nextStep}
							change={change}
							values={values}
							error={error}
						/>
					&lt;/>
				)
			case 2:
				return (
					&lt;>
						&lt;ToastContainer />
						&lt;PersonalInfo
							nextStep={nextStep}
							previousStep={previousStep}
							change={change}
							values={values}
							error={error}
						/>
					&lt;/>
				)
			case 3:
				return (
					&lt;Confirm
						nextStep={nextStep}
						previousStep={previousStep}
						values={values}
						error={error}
					/>
				)
			case 4:
				return &lt;Success />
			default:
				return null
		}
	}
}

export default Register
</code></pre>
        </article>
    </section>




            </div>
            
        </div>
        <div id="side-nav" class="side-nav">
        </div>
    </div>
<script src="scripts/app.min.js"></script>
<script>PR.prettyPrint();</script>
<script src="scripts/linenumber.js"> </script>

<script src="scripts/search.js"> </script>


</body>
</html>
